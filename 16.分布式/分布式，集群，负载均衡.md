### 分布式
> CAP理论是分布式领域重要理论

分布式计算系统不可能同时确保一致性（Consistency）、可用性（Availablity）和分区容忍性（Partition），设计中往往需要弱化对某个特性的保证。

1. 一致性：分布式是多节点的系统，一个更改提交给分布式系统的后，可从各个节点拿到一致的结果。
2. 可用性：在有限时间内，任何非失败节点都能给出应答。
3. 分区容忍性：分区是指在分布式系统中发生了某种故障，导致分布式某些节点与另外一下节点之间无法连通，这就是出现了分区。
### 分布式与集群
#### 概念
- [ ] 分布式是指将不同的业务分布在不同的地方。 
- [ ] 而集群指的是将几台服务器集中在一起，实现同一业务。
- 
- [ ] 分布式中的每一个节点，都可以做集群。 
- [ ] 而集群并不一定就是分布式的
- 
- [ ] 分布式是以缩短单个任务的执行时间来提升效率的，
- [ ] 而集群则是通过提高单位时间内执行的任务数来提升效率。
- 


### 负载均衡(Load Balance)
网络的负载均衡是一种动态均衡技术，常见的实现方式是通过一些工具实时地分析数据包，掌握网络中的数据流量状况，把任务合理均衡地分配出去。

#### 延伸-nginx 负载均衡
Nginx支持的负载均衡调度算法方式如下：

1. weight轮询(默认)：接收到的请求按照顺序逐一分配到不同的后端服务器，即使在使用过程中，某一台后端服务器宕机，Nginx会自动将该服务器剔除出队列，请求受理情况不会受到任何影响。 这种方式下，可以给不同的后端服务器设置一个权重值(weight)，用于调整不同的服务器上请求的分配率；权重数据越大，被分配到请求的几率越大；该权重值，主要是针对实际工作环境中不同的后端服务器硬件配置进行调整的。
2. ip_hash：每个请求按照发起客户端的ip的hash结果进行匹配，这样的算法下一个固定ip地址的客户端总会访问到同一个后端服务器，这也在一定程度上解决了集群部署环境下session共享的问题。
3. fair：智能调整调度算法，动态的根据后端服务器的请求处理到响应的时间进行均衡分配，响应时间短处理效率高的服务器分配到请求的概率高，响应时间长处理效率低的服务器分配到的请求少；结合了前两者的优点的一种调度算法。但是需要注意的是Nginx默认不支持fair算法，如果要使用这种调度算法，请安装upstream_fair模块。
4. url_hash：按照访问的url的hash结果分配请求，每个请求的url会指向后端固定的某个服务器，可以在Nginx作为静态服务器的情况下提高缓存效率。同样要注意Nginx默认不支持这种调度算法，要使用的话需要安装Nginx的hash软件包。

```
集群：多个人在一起作同样的事 
分布式 ：多个人在一起作不同的事
```


> 例如：
> 如果一个任务由10个子任务组成，每个子任务单独执行需1小时，则在一台服务器上执行该任务需10小时。

1. 采用分布式方案，提供10台服务器，每台服务器只负责处理一个子任务，不考虑子任务间的依赖关系，执行完这个任务只需一个小时。(这种工作模式的一个典型代表就是Hadoop的Map/Reduce分布式计算模型）

2. 而采用集群方案，同样提供10台服务器，每台服务器都能独立处理这个任务。假设有10个任务同时到达，10个服务器将同时工作，1小时后，10个任务同时完成，这样，整身来看，还是1小时内完成一个任务！

